\chapter{Wprowadzenie do tematu}


% The hierarchical data model organizes data in a tree structure. There is a hierarchy of parent and child data segments

\section{Podstawowe definicje}

Drzewa można traktować i definiować na wiele równowarznych sposobów.
Przykładowo w~teorii grafów jest to acykliczny i spójny graf.
W informatyce częściej stosuje się definicję rekurencyjną%
\footnote{
    Wynika to z częstego w informatyce wymogu by drzewo było uporządkowane.
    Taki twór formalnie nie jest grafem.
}.


\begin{quote}

\emph{Drzewo} zdefiniujemy formalnie jako zbiór $T$ jednego lub więcej elementów zwanych \emph{węzłami}, takich że:

\begin{enumerate}
 \item istnieje jeden wyróżniony węzeł zwany \treedef{korzeniem} drzewa, $root(T)$; oraz
 \item pozostałe węzły (z wyłączeniem korzenia) są podzielone na $m \geq 0$ rozłącznych zbiorów $T_{1},\ldots, T_{m}$,
	z których każdy jest drzewem. Drzewa $T_{1},\ldots, T_{m}$ nazywane są \treedef{poddrzewami} korzenia.
\end{enumerate}

Z naszej definicji wynika, że każdy węzeł drzewa jest korzeniem pewnego poddrzewa zawartego w większym drzewie.
Liczna poddrzew węzła jest nazywana \treedef{stopniem} tego węzła.
Węzeł o stopniu zero nazywamy \treedef{liściem} lub \treedef{węzłem zewnętrznym}. 
Węzeł nie będący liściem nazywamy \treedef{węzłem wewnętrznym}. 
Poziom węzła jest zdefiniowany rekurencyjnie: poziom korzenia $root(T)$ równa się zero,
a poziom każdego innego węzła jest o jeden wiekszy niż poziom korzenia w najmniejszym 
\todo{w sensie ilości węzłów} zawierającym go poddrzewie.
%
% TODO: wysokość
%



Jeśli względny porządek poddrzew $T_{1},\ldots, T_{m}$ w części (2) definicji jest istotny,
to mówimy, że drzewo jest \treedef{uporządkowane}. \todo{...}
Jeśli nie chcemy rozróżniać drzew, które różnią się jedynie kolejnością poddrzew, mówimy o drzewach \treedef{zorientowanych}.

\treedef{Lasem} nazywamy zbiór zera lub więcej rozłącznych drzew. 
Innym sposobem wyprowadzenia części (2) definicji jest stwierdzenie: \textit{węzły drzewa z wyłączeniem korzenia tworzą las}.

Abstrakcyjnie drzewa i lasy niewiele się różnią.
Jeśli usuniemy korzeń drzewa, otrzymamy las.
W drugą stronę, jeśli wszystkie drzewa w lesie uczynimy poddrzewami jednego dodatkowego węzła, to otrzymamy drzewo.
Z tego powodu słowa ,,drzewa'' i ,,lasy'' są przy nieformalnym omawianiu struktur danych używane niemal wymiennie.

\end{quote}

%\begin{quote}
%
%\emph{Drzewo} zdefiniujemy formalnie jako zbiór $T$ jednego lub więcej elementów zwanych \emph{węzłami}, takich że:
%
%\begin{enumerate}
% \item istnieje jeden wyróżniony węzeł zwany \emph{korzeniem} drzewa, $root(T)$; oraz
% \item pozostałe węzły (z wyłączeniem korzenia) są podzielone na $m \geq 0$ rozłącznych zbiorów $T_{1},\ldots, T_{m}$,
%	z których każdy jest drzewem. Drzewa $T_{1},\ldots, T_{m}$ nazywane są \emph{poddrzewami} korzenia.
%\end{enumerate}
%
%Z naszej definicji wynika, że każdy węzeł drzewa jest korzeniem pewnego poddrzewa zawartego w większym drzewie.
%Liczna poddrzew węzła jest nazywana stopniem tego węzła.
%Węzeł o stopniu zero nazywamy \emph{liściem} lub \emph{węzłem zewnętrznym}. 
%Węzeł nie będący liściem nazywamy \emph{węzłem wewnętrznym}. 
%Poziom węzła jest zdefiniowany rekurencyjnie: poziom korzenia $root(T)$ równa się zero,
%a poziom każdego innego węzła jest o jeden wiekszy niż poziom korzenia w najmniejszym 
%\todo{w sensie ilości węzłów} zawierającym go poddrzewie.
%
%
%
%Jeśli względny porządek poddrzew $T_{1},\ldots, T_{m}$ w części (2) definicji jest istotny,
%to mówimy, że drzewo jest \emph{uporządkowane}. \todo{...}
%Jeśli nie chcemy rozróżniać drzew, które różnią się jedynie kolejnością poddrzew, mówimy o drzewach \emph{zorientowanych}.
%
%\emph{Lasem} nazywamy zbiór zera lub więcej rozłącznych drzew. 
%Innym sposobem wyprowadzenia części (2) definicji jest stwierdzenie: \textit{węzły drzewa z wyłączeniem korzenia tworzą las}.
%
%Abstrakcyjnie drzewa i lasy niewiele się różnią.
%Jeśli usuniemy korzeń drzewa, otrzymamy las.
%W drugą stronę, jeśli wszystkie drzewa w lesie uczynimy poddrzewami jednego dodatkowego węzła, to otrzymamy drzewo.
%Z tego powodu słowa ,,drzewa'' i ,,lasy'' są przy nieformalnym omawianiu struktur danych używane niemal wymiennie.
%
%\end{quote}

%
%
%\section{Czym jest drzewo}
%\index{drzewo|textbf}
%Drzewo to bardzo powszechnie używane w informatyce pojęcie. W zależności od zastosowania może być różnie zdefiniowane.
%
%\paragraph{Drzewo jako graf}
%\index{graf}
%\paragraph{Drzewo jako struktura rekurencyjna}
%\index{rekurencja}
%
%
%Tu: matematyczny opis drzew, ich podstawowe własności, omówienie terminów:
%\begin{description}
%    \item
%    \item[drzewo]
%    \item[las]
%    \item[rodzic]
%    \item[przodek]
%    \item[korzeń]
%    \item[dziecko]
%    \item[potomek]
%    \item[głębokość, mini]
%\end{description}
%
%\section{Podział drzew}
%\subsection{Jednorodność}
%Warto by dodać o drzewach jednorodnych oraz niejednorodnych.
%
%\subsection{Kolejność}
%
%
%\section{Podstawowe algorytmy dla drzew}
%\subsection{Wyszukiwanie w głąb}
%\index{drzewo!wyszukiwanie!w głąb}
%\subsection{Wyszukiwanie wszerz}
%\index{drzewo!wyszukiwanie!wszerz}
%
%
%\section{Różnice pomiędzy drzewami w algorytmice a w bazach danych}
%
%Nie ma sensu coś takiego jak drzewo czerwono-czarne gdyż w drzewach w bazach danych chodzi o strukturę a nie o optymalizację czasu dostępu.
%
%\section{Tematy porównania - operacje}
%
%
%
%\subsection{Operacje}
%\subsection{Pobranie korzeni}
%\index{drzewo!korzeń}
%\subsection{Pobranie przodków}
%\index{drzewo!przodekowie}
%\subsection{Pobranie rodzica}
%\index{drzewo!rodzic}
%\subsection{Pobranie dzieci}
%\index{drzewo!dzieci}
%\subsection{Pobranie potomków}
%\index{drzewo!potomkowie}
%\subsection{Pobranie (najmłodszego) wspólnego przodka}



% \begin{description}
%   \item[pobranie rodzica] polega na pobraniu rodzica bieżącego elementu
%   \item[pobranie przodków] polega na pobraniu rodzica, rodzica rodzica aż do korzenia elementów
% \end{description}

%\section{Dostępność}
%\subsection{Mapowanie relacyjno-obiektowe}
%\subsection{W zależności od bazy danych}
%

\section{Przyjęte założenia}
\todo{więcej wypisać, zastanowić się co z tym zrobić}

\paragraph{Przechowywany jest las}
Zgodnie z definicją z poprzedniego rozdziału las jest bardzo podobny do drzewa.
Jeśli nie potrzebny jest las a drzewo to wystarczy zauważyć, że chodzi nam o las składający się z tylko jednego drzewa.\todo{przepisać}


\paragraph{Drzewa uporządkowane}
Nie wymagane jest by metoda odpowiadała za przechowywanie porządku poddrzew.
Jeśli zaistnieje taki wymóg to można dodać kolumnę przeznaczoną do przechowywania wartości odpowiedzialnej za relację porządku.
Czasem istnieje też możliwośc sortowania po istniejących już kolumnach, przykładowo nazwie kategorii.


\paragraph{Tabela zawiera tylko jedną kolumnę z danymi użytkownika} 
Bez problemu można dodać więcej kolumn do tabeli. Obecność wyłącznie kolumny \texttt{name} zwiększa czytelność przykładów.



\paragraph{Zapytania wyłącznie związane z hierarchiczną strukturą danych}
\begin{itemize*}
    \item \treedef{Pobranie korzeni}
    \item \treedef{Pobranie rodzica}
    \item \treedef{Pobranie przodków}
    \item \treedef{Pobranie dzieci}
    \item \treedef{Pobranie potomków}
\end{itemize*}




\paragraph{Przedstawione fragmenty kodu} 
W opisach metod znajdują się fragmenty kodu je realizujące operacje na nich. 
Tam gdzie to jest możliwe (czyli metoda jest dostępna ) została zaprezentowana składnia PostgreSQL\index{PostgreSQL}.
Fragmenty kodu \todo{napisać o tym że gdzieniegdzie pojawiają się \texttt{:name}} wymagające parametrów...

Część operacji nie daje się wykonać wyłącznie za pomocą jednego (lub więcej) zapytań SQL.
W takiej sytuacji fragmenty kodu zawierają kod języka \emph{Python}\index{Python}.
Został on wybrany do tego zadania ze względu na jego ekspresyjność, zwięzłość oraz wysoki poziom abstrakcji\todo{dobre sformuowanie?}.
Z powodu tych cech jest często nazywany \emph{wykonywalnym pseudokodem}.

Aby polepszyć zwięzłość fragmęty kodu korzystają z bibloteki PADA, stworzonej aby uprościć pisanie implementacji opisanych metod. 
Więcej informacji o tej biblotece znajduje się w \todo{Załączniku 2}.



\paragraph{Operacje z wykorzystaniem \texttt{id}}
Wszystkie operacje wykorzystują sztucznie utworzony klucz główny\index{klucz!główny} \texttt{id}. 



\paragraph{Terminologia anglojęzyczna} \todo{nazwać to jakoś normalnie}
Literatura dotycząca informatyki jest dzisiaj zdominowana przez publikacje w języku angielskim. Dlatego przy każdym ważnym lub nietrywialnym w tłumaczeniu terminie została podana jego angielska wersja. 

