\chapter{Metodyka testów}

\section{Wybrane SZDB}

Do testów zostały wybrane popularne, dostępne bezpłatnie\footnote{również do zastosowań komercyjnych} bazy danych. 
W przypadku baz Open Source wykorzystano najnowsze, stabilne wersje.
Dla baz komercyjnych zostały wybrane ich darmowe edycje. 
Posiadają one ograniczenia co do wielkości baz danych, wykorzystania zasobów oraz zmniejszoną funkcjonalność. 
Specyfika testów sprawia jednak, że te ograniczenia nie miały znaczenia podczas testów.


% \begin{itemize}
%  \item PostgreSQL\index{PostgreSQL}
%  \item MySQL\index{MySQL}
%  \item SQLite\index{SQLite}
%  \item Oracle Database 10g Express Edition\index{Oracle}
%  \item IBM DB2 Express-C\index{IBM DB2}
%  \item Microsoft SQL Server 2008 Express\index{SQL Server}
% \end{itemize}

\begin{qxtab}{edgeenum}{Użyte wersje baz danych}
\begin{tabular}{l|l|l}
Baza danych                            & Wersja & Edycja \\
\hline
PostgreSQL\index{PostgreSQL}           &  8.3   & \\
MySQL\index{MySQL}                     &  5.1   & \\
SQLite\index{SQLite}                   &  3     & \\
Oracle Database\index{Oracle}          &  10g   & Express Edition \\
IBM DB2\index{IBM DB2}                 &  9.5   & Express-C \\
Microsoft SQL Server\index{SQL Server} &  2008  & Express\\
\end{tabular} 
\end{qxtab}

\todo{Napisać jaki typ tabelek zpstał urzyty w MySQL (MyISAM, InnoDB)}

% Wybrane zostały SZDB spełniające następujące cechy:
% \begin{itemize}
%  \item popularne
%  \item darmowe do użytku domowego 
% \end{itemize}


% Dla porównania innych rozwiązań zostały dobrane następujące bazy danych:
% 
% \begin{itemize}
%  \item db4o
%  \item berkeley DB
%  \item ??
% \end{itemize}



\section{Dane testowe}

Dane użyte podczas testów zostały wygenerowane losowo w sposób automatyczny. 
Program który zajmuje się tym zadaniem został dołączony do tej pracy.




Większość testów wymaga identyfikatorów węzłów. 
Wybranie losowego identyfikatora z istniejących w bazie danych było by najprostrzym 
ale też niedoskonałym\todo{obarczonym błędem} rozwiązaniem.
Wynika to z tego, że w drzewe (o stopniu większym niż 2\todo{bardzo nieprecyzyjnie napisane}) 
liście stanowią najliczniejszą grupę węzłów.
Natomiast węzły o niskim poziomie są małoliczne.
Dlatego zapytanie o potomków tak wylosowanego węzła było by zadaniem prostym, natomiast przodków --- trudnym (gdyż z dużym prawdopodobieństwem wylosowany by został liść).

Aby zapobiec takiej sytuacji identyfikatory dla zapytań losowane są dwuetapowo:
\begin{enumerate}
 \item najpierw losowany jest jeden z poziomów węzłów w drzewie
 \item nastepnia losowany jest jeden z węzłów identyfikatorów
\end{enumerate}
Ta procedura powtarza się do uzyskania wymaganej ilości identyfikatorów węzłów. 
W obu losowaniach wykorzystywany jest \emph{dyskretny rozkład jednostajny}. 




% Aby przetestować przedstawione rozwiązania wykożystane zostały następujące zestawy danych:
% \begin{itemize}
%  \item mały test 100 dwupoziomowo
%  \item test mocnego zagłębienia
%  \item test małego zagłebienia
%  \item test 6 pozimów po 3 zagłębienia 
% \end{itemize}


% Parametry generatora danych:
% \begin{itemize}
%  \item minimalny poziom zagłębienia
%  \item maksymalny poziom zagłębienia
%  \item rozklad prawdopodobieństwa wygenerowania dzieci (\cite{asdf}, \cite[Ala]{asdf})
% \end{itemize}


\section{Środowisko testowe}

Aby zminimalizować potencjalne problemy wynikające z instalacji wielu baz na 
jednej maszynie dla potrzeb testów zostały stworzone dla nich odzielne maszyny wirtualne. 
Wykorzystano VirtualBox 2.1. Każdej maszynie został przyznany 10GB virtualny dysk 
o~stałym rozmiarze oraz 512 MB RAM. Program testujący działał również na maszynie wirtualnej, 
więc ominięto problem przepustowości interfacu sieciowego. 
\todo{lepsze nazwy; wersja; usunac powtórzenia}

Bazy posiadające wersję dla systemu GNU/Linux zostały zainstalowane na nim. 
Baza Microsoft SQL Server została zainstalowana na Windows XP Service Pack 2.
